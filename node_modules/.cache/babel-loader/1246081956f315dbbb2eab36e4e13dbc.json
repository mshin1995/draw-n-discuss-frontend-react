{"ast":null,"code":"var _jsxFileName = \"/Users/isalevine/flatiron/module-4-project/frontend-react/src/components/Chatroom.js\";\nimport React, { Component } from 'react';\nimport { HEADERS, API_ROOT } from '../constants';\nimport MessageList from './MessageList';\nimport MessageForm from './MessageForm';\n\nclass Chatroom extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = () => {\n      fetch(\"\".concat(API_ROOT, \"/messages\")).then(resp => resp.json()).then(data => this.setState({\n        messages: data\n      }));\n      fetch(\"\".concat(API_ROOT, \"/users\")).then(resp => resp.json()).then(data => {\n        console.log(\"fetch users data: \", data);\n        data.forEach(obj => {\n          this.users[obj.id] = obj.name;\n        });\n      });\n    };\n\n    this.addNewMessage = message => {\n      this.setState({\n        messages: [...this.state.messages, message]\n      });\n      fetch(\"\".concat(API_ROOT, \"/messages\"), {\n        method: 'POST',\n        headers: HEADERS,\n        body: JSON.stringify({\n          'text': message.text,\n          'user_id': sessionStorage.getItem('id')\n        })\n      });\n    };\n\n    this.state = {\n      messages: []\n    };\n    this.users = {};\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"chatroom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(MessageList, {\n      messages: this.state.messages,\n      users: this.users,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(MessageForm, {\n      addNewMessage: this.addNewMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Chatroom;","map":{"version":3,"sources":["/Users/isalevine/flatiron/module-4-project/frontend-react/src/components/Chatroom.js"],"names":["React","Component","HEADERS","API_ROOT","MessageList","MessageForm","Chatroom","constructor","componentDidMount","fetch","then","resp","json","data","setState","messages","console","log","forEach","obj","users","id","name","addNewMessage","message","state","method","headers","body","JSON","stringify","text","sessionStorage","getItem","render"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,OAAR,EAAiBC,QAAjB,QAAgC,cAAhC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,MAAMC,QAAN,SAAuBL,SAAvB,CAAiC;AAC/BM,EAAAA,WAAW,GAAE;AACX;;AADW,SAQbC,iBARa,GAQO,MAAM;AACxBC,MAAAA,KAAK,WAAIN,QAAJ,eAAL,CACGO,IADH,CACQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADhB,EAEGF,IAFH,CAEQG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAC1BC,QAAAA,QAAQ,EAAEF;AADgB,OAAd,CAFhB;AAMAJ,MAAAA,KAAK,WAAIN,QAAJ,YAAL,CACCO,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMG,IAAI,IAAI;AACZG,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCJ,IAAlC;AACAA,QAAAA,IAAI,CAACK,OAAL,CAAaC,GAAG,IAAI;AAClB,eAAKC,KAAL,CAAWD,GAAG,CAACE,EAAf,IAAqBF,GAAG,CAACG,IAAzB;AACD,SAFD;AAGD,OAPD;AAQD,KAvBY;;AAAA,SAyBbC,aAzBa,GAyBIC,OAAD,IAAa;AAC3B,WAAKV,QAAL,CAAc;AACZC,QAAAA,QAAQ,EAAE,CAAC,GAAG,KAAKU,KAAL,CAAWV,QAAf,EAAyBS,OAAzB;AADE,OAAd;AAGAf,MAAAA,KAAK,WAAIN,QAAJ,gBAAyB;AAC5BuB,QAAAA,MAAM,EAAE,MADoB;AAE5BC,QAAAA,OAAO,EAAEzB,OAFmB;AAG5B0B,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,kBAAQN,OAAO,CAACO,IADG;AAEnB,qBAAWC,cAAc,CAACC,OAAf,CAAuB,IAAvB;AAFQ,SAAf;AAHsB,OAAzB,CAAL;AAQD,KArCY;;AAEX,SAAKR,KAAL,GAAa;AACXV,MAAAA,QAAQ,EAAE;AADC,KAAb;AAGA,SAAKK,KAAL,GAAa,EAAb;AACD;;AAiCDc,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,EAAE,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKT,KAAL,CAAWV,QAAlC;AAA4C,MAAA,KAAK,EAAE,KAAKK,KAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,WAAD;AAAa,MAAA,aAAa,EAAE,KAAKG,aAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAMD;;AA/C8B;;AAmDjC,eAAejB,QAAf","sourcesContent":["import React, {Component} from 'react'\nimport {HEADERS, API_ROOT} from '../constants';\nimport MessageList from './MessageList'\nimport MessageForm from './MessageForm'\n\nclass Chatroom extends Component {\n  constructor(){\n    super()\n    this.state = {\n      messages: []\n    }\n    this.users = {}\n  }\n\n  componentDidMount = () => {\n    fetch(`${API_ROOT}/messages`)\n      .then(resp => resp.json())\n      .then(data => this.setState({\n        messages: data\n      }))\n\n    fetch(`${API_ROOT}/users`)\n    .then(resp => resp.json())\n    .then(data => {\n      console.log(\"fetch users data: \", data)\n      data.forEach(obj => {\n        this.users[obj.id] = obj.name\n      })\n    })\n  }\n\n  addNewMessage = (message) => {\n    this.setState({\n      messages: [...this.state.messages, message ]\n    })\n    fetch(`${API_ROOT}/messages`, {\n      method: 'POST',\n      headers: HEADERS,\n      body: JSON.stringify({\n        'text': message.text,\n        'user_id': sessionStorage.getItem('id')\n      })\n    })\n  }\n\n  render() {\n    return (\n      <div id=\"chatroom\">\n        <MessageList messages={this.state.messages} users={this.users}/>\n        <MessageForm addNewMessage={this.addNewMessage} />\n      </div>\n    )\n  }\n\n}\n\nexport default Chatroom\n"]},"metadata":{},"sourceType":"module"}