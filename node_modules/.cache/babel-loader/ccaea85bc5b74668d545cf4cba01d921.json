{"ast":null,"code":"var _jsxFileName = \"/Users/isalevine/flatiron/module-4-project/frontend-react/src/components/GameWindow.js\";\nimport React, { Component } from 'react';\nimport Canvas from './Canvas';\nimport Chatroom from './Chatroom';\nimport ViewGalleryButton from './ViewGalleryButton';\nimport { API_ROOT } from '../constants/index.js';\n\nclass GameWindow extends Component {\n  constructor(props) {\n    super();\n\n    this.fetchUsers = () => {\n      fetch(\"\".concat(API_ROOT, \"/users\")).then(resp => resp.json()).then(data => {\n        let obj = {};\n        data.forEach(user => {\n          obj[user.id] = user.name;\n        });\n        this.setState({\n          users: obj\n        });\n      });\n    };\n\n    this.state = {\n      users: {}\n    };\n    this.reload = true;\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n  }\n\n  componentDidUpdate() {\n    if (this.reload) {\n      this.reload = false;\n      window.location.reload();\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"game-window\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(Canvas, {\n      saveDrawing: this.saveDrawing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }), React.createElement(Chatroom, {\n      users: this.state.users,\n      fetchUsers: this.fetchUsers,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), React.createElement(ViewGalleryButton, {\n      history: this.props.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default GameWindow;","map":{"version":3,"sources":["/Users/isalevine/flatiron/module-4-project/frontend-react/src/components/GameWindow.js"],"names":["React","Component","Canvas","Chatroom","ViewGalleryButton","API_ROOT","GameWindow","constructor","props","fetchUsers","fetch","then","resp","json","data","obj","forEach","user","id","name","setState","users","state","reload","componentDidMount","componentDidUpdate","window","location","render","saveDrawing","history"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,SAAQC,QAAR,QAAuB,uBAAvB;;AAGA,MAAMC,UAAN,SAAyBL,SAAzB,CAAmC;AAEjCM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB;;AADiB,SAmBnBC,UAnBmB,GAmBN,MAAM;AACjBC,MAAAA,KAAK,WAAIL,QAAJ,YAAL,CACCM,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMG,IAAI,IAAI;AACZ,YAAIC,GAAG,GAAG,EAAV;AACAD,QAAAA,IAAI,CAACE,OAAL,CAAaC,IAAI,IAAI;AACnBF,UAAAA,GAAG,CAACE,IAAI,CAACC,EAAN,CAAH,GAAeD,IAAI,CAACE,IAApB;AACD,SAFD;AAGA,aAAKC,QAAL,CAAc;AAACC,UAAAA,KAAK,EAAEN;AAAR,SAAd;AACD,OARD;AASD,KA7BkB;;AAEjB,SAAKO,KAAL,GAAa;AACXD,MAAAA,KAAK,EAAE;AADI,KAAb;AAGA,SAAKE,MAAL,GAAc,IAAd;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKf,UAAL;AACD;;AAEDgB,EAAAA,kBAAkB,GAAG;AACnB,QAAI,KAAKF,MAAT,EAAiB;AACf,WAAKA,MAAL,GAAc,KAAd;AACAG,MAAAA,MAAM,CAACC,QAAP,CAAgBJ,MAAhB;AACD;AACF;;AAcDK,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,EAAE,EAAC,aAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,WAAW,EAAE,KAAKC,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAE,KAAKP,KAAL,CAAWD,KAA5B;AAAmC,MAAA,UAAU,EAAE,KAAKZ,UAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,iBAAD;AAAmB,MAAA,OAAO,EAAE,KAAKD,KAAL,CAAWsB,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CADF;AAOD;;AAzCgC;;AA6CnC,eAAexB,UAAf","sourcesContent":["import React, {Component} from 'react'\nimport Canvas from './Canvas'\nimport Chatroom from './Chatroom'\nimport ViewGalleryButton from './ViewGalleryButton'\nimport {API_ROOT} from '../constants/index.js'\n\n\nclass GameWindow extends Component {\n\n  constructor(props) {\n    super()\n    this.state = {\n      users: {}\n    }\n    this.reload = true;\n  }\n\n  componentDidMount() {\n    this.fetchUsers()\n  }\n\n  componentDidUpdate() {\n    if (this.reload) {\n      this.reload = false\n      window.location.reload()\n    }\n  }\n\n  fetchUsers = () => {\n    fetch(`${API_ROOT}/users`)\n    .then(resp => resp.json())\n    .then(data => {\n      let obj = {}\n      data.forEach(user => {\n        obj[user.id] = user.name\n      })\n      this.setState({users: obj})\n    })\n  }\n\n  render() {\n    return (\n      <div id=\"game-window\">\n        <Canvas saveDrawing={this.saveDrawing}/>\n        <Chatroom users={this.state.users} fetchUsers={this.fetchUsers}/>\n        <ViewGalleryButton history={this.props.history}/>\n      </div>\n    )\n  }\n\n}\n\nexport default GameWindow\n"]},"metadata":{},"sourceType":"module"}